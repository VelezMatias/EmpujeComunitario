<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">
<head>
  <meta charset="UTF-8"/>
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="shortcut icon" type="image/x-icon" th:href="@{/charifit/img/favicon.png}">
  <link rel="stylesheet" th:href="@{/charifit/css/bootstrap.min.css}" />
  <link rel="stylesheet" th:href="@{/charifit/css/owl.carousel.min.css}" />
  <link rel="stylesheet" th:href="@{/charifit/css/magnific-popup.css}">
  <link rel="stylesheet" th:href="@{/charifit/css/font-awesome.min.css}">
  <link rel="stylesheet" th:href="@{/charifit/css/themify-icons.css}">
  <link rel="stylesheet" th:href="@{/charifit/css/nice-select.css}">
  <link rel="stylesheet" th:href="@{/charifit/css/flaticon.css}">
  <link rel="stylesheet" th:href="@{/charifit/css/gijgo.css}">
  <link rel="stylesheet" th:href="@{/charifit/css/animate.css}">
  <link rel="stylesheet" th:href="@{/charifit/css/slicknav.css}">
  <link rel="stylesheet" th:href="@{/charifit/css/style.css}">

  <style>
    .saludo{color:white;margin:0;font-weight:500;}
    .saludo b{color:white;}
    body{background:white;color:black;font-family:'Inter',system-ui,'Segoe UI',Roboto,Helvetica,Arial,sans-serif;line-height:1.6;}
    main{margin-top:150px;margin-bottom:60px;padding-left:100px;padding-right:100px;}
    h1{margin:0 0 12px;color:black;font-weight:700;}
    .btn{
      background:linear-gradient(to right,#3CC78F,#3cc7c0ff);
      border:none;color:black;padding:10px 18px;border-radius:10px;cursor:pointer;
      text-decoration:none;font-weight:600;transition:all .3s;box-shadow:0 4px 6px rgba(0,0,0,.1);
    }
    .btn:hover{transform:translateY(-2px);box-shadow:0 6px 12px rgba(0,0,0,.15);color:#fff;text-decoration:none;}
    table{width:100%;border-collapse:collapse;margin-top:12px;border-radius:10px;overflow:hidden;box-shadow:0 4px 6px rgba(0,0,0,.1);margin-bottom:24px;}
    thead{background:linear-gradient(to right,#3CC78F,#3cc7c0ff);}
    th{padding:14px 12px;text-align:center;font-weight:700;color:white;border-bottom:2px solid #3CC78F;}
    td{padding:12px;border-bottom:1px solid rgba(71,85,105,.5);color:black;text-align:center;}
    tbody tr{transition:background-color .3s;}
    tbody tr:nth-child(even){background:rgba(178,183,192,.66);}
    tbody tr:hover{background:#80ddb8ff;}
  </style>
  <title>Donaciones</title>
</head>
<body>
<header>
  <div class="header-area">
    <div id="sticky-header" class="main-header-area">
      <div class="container-fluid">
        <div class="row align-items-center">
          <div class="col-xl-3 col-lg-3">
            <th:block th:if="${session.username} != null">
              <p class="saludo">¡Hola <b th:text="${session.username}"></b>!
                (rol: <span th:text="${session.rol}"></span>)
              </p>
            </th:block>
          </div>
          <div class="col-xl-9 col-lg-9">
            <div class="main-menu">
              <nav>
                <ul id="navigation">
                  <li><a th:href="@{/home}">Inicio</a></li>
                    <!-- según rol -->
                  <li><a href="#">Solicitudes<i class="ti-angle-down"></i></a>
                    <ul class="submenu">
                      <li><a th:href="@{/ui/solicitudes}">Ver solicitudes</a></li>
                      <li><a th:href="@{/ui/solicitudes/nueva}">Nueva solicitud</a></li>
                    </ul>
                  </li>
                  <li th:if="${session.rol} == 'PRESIDENTE'"><a href="#">Usuarios<i class="ti-angle-down"></i></a>
                    <ul class="submenu">
                      <li><a th:href="@{/auth/register}">Registrar usuario</a></li>
                      <li><a th:href="@{/admin/users}">Administrar Usuarios</a></li>
                    </ul>
                  </li>
                  <li th:if="${session.rol} == 'PRESIDENTE'"><a th:href="@{/eventos}">Eventos</a></li>
                  <li th:if="${session.rol} == 'PRESIDENTE' or ${session.rol} == 'VOCAL'"><a th:href="@{/donaciones}">Donaciones</a></li>
                  <li>
                    <a href="#">Informes<i class="ti-angle-down"></i></a>
                    <ul class="submenu">
                      <li><a th:href="@{/informes/donaciones}">Informes de Donaciones</a></li>
                      <li><a th:href="@{/informes/eventos-participacion}">Informe de Participación en eventos</a></li>
                    </ul>
                  </li>
                  <li th:if="${session.username} == null">
                    <a class="login-btn" th:href="@{/auth/login}">Ingresar</a>
                  </li>
                  <li th:if="${session.username} != null">
                    <a th:href="@{/auth/logout}">Salir</a>
                  </li>
                </ul>
              </nav>
            </div>
          </div>
          <div class="col-12"><div class="mobile_menu d-block d-lg-none"></div></div>
        </div>
      </div>
    </div>
  </div>
</header>

<main>
  <h1>Listado de Donaciones</h1>

  <!-- Botones opcionales para alta/acciones -->
  <div class="mb-3" th:if="${session.rol} == 'PRESIDENTE' or ${session.rol} == 'VOCAL'">
    <a class="btn" th:href="@{/donaciones/nueva}">Nueva Donación</a>
  </div>

  <!-- Tabla -->
  <table class="table table-striped"
         th:with="data=${#lists.isEmpty(items) ? donaciones : items}">
    <thead>
      <tr>
        <th>Categoría</th>
        <th>Descripción</th>
        <th>Cantidad</th>
        <th>Fecha alta</th>
        <th>Estado</th>
        <th style="width:220px;">Acciones</th>
      </tr>
    </thead>
  <tbody>
  <tr th:each="d : ${items}">
    <!-- Categoria es un enum -->
    <td th:text="${d.categoria != null ? #strings.replace(d.categoria.name(),'_',' ') : '-'}">ALIMENTOS</td>
    <td th:text="${d.descripcion}">Arroz</td>
    <td th:text="${d.cantidad}">10</td>
    <!-- createdAt viene como 'YYYY-MM-DDTHH:mm:ss' -->
    <td th:text="${#strings.isEmpty(d.createdAt) ? '-' : d.createdAt.substring(0,10)}">2025-08-31</td>
  </tr>

  <tr th:if="${#lists.isEmpty(items)}">
    <td colspan="4">No hay donaciones registradas.</td>
    <td>
      <span th:classappend="${d.eliminado} ? 'badge-state badge-deleted' : 'badge-state badge-active'"
            th:text="${d.eliminado} ? 'ELIMINADO' : 'ACTIVO'">ACTIVO</span>
    </td>
    <td class="actions-cell">
      <div class="btn-group" role="group" aria-label="acciones">
        <a th:if="${!d.eliminado}" class="genric-btn info-border radius small"
            th:href="@{|/donaciones/${d.id}/edit|}">Editar</a>
        <form th:if="${!d.eliminado}" th:action="@{|/donaciones/${d.id}/delete|}"
              method="post" onsubmit="return confirm('¿Confirmás la baja lógica de este ítem?');">
          <button class="genric-btn danger-border radius small" type="submit">Eliminar</button>
        </form>
      </div>
    </td>
  </tr>
</tbody>

  </table>
</main>

<script th:src="@{/charifit/js/vendor/modernizr-3.5.0.min.js}"></script>
<script th:src="@{/charifit/js/vendor/jquery-1.12.4.min.js}"></script>
<script th:src="@{/charifit/js/popper.min.js}"></script>
<script th:src="@{/charifit/js/bootstrap.min.js}"></script>
<script th:src="@{/charifit/js/owl.carousel.min.js}"></script>
<script th:src="@{/charifit/js/isotope.pkgd.min.js}"></script>
<script th:src="@{/charifit/js/ajax-form.js}"></script>
<script th:src="@{/charifit/js/waypoints.min.js}"></script>
<script th:src="@{/charifit/js/jquery.counterup.min.js}"></script>
<script th:src="@{/charifit/js/imagesloaded.pkgd.min.js}"></script>
<script th:src="@{/charifit/js/scrollIt.js}"></script>
<script th:src="@{/charifit/js/jquery.scrollUp.min.js}"></script>
<script th:src="@{/charifit/js/wow.min.js}"></script>
<script th:src="@{/charifit/js/nice-select.min.js}"></script>
<script th:src="@{/charifit/js/jquery.slicknav.min.js}"></script>
<script th:src="@{/charifit/js/jquery.magnific-popup.min.js}"></script>
<script th:src="@{/charifit/js/plugins.js}"></script>
<script th:src="@{/charifit/js/gijgo.min.js}"></script>
<script th:src="@{/charifit/js/contact.js}"></script>
<script th:src="@{/charifit/js/jquery.ajaxchimp.min.js}"></script>
<script th:src="@{/charifit/js/jquery.form.js}"></script>
<script th:src="@{/charifit/js/jquery.validate.min.js}"></script>
<script th:src="@{/charifit/js/mail-script.js}"></script>
<script th:src="@{/charifit/js/main.js}"></script>
</body>
</html>
